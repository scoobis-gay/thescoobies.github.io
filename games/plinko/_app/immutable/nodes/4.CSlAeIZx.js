import{b as u,t as _}from"../chunks/disclose-version.F_1_Tx-r.js";import{C as Y,M as i,G as Z,F as tt,N as s,O as e,P as t,Q as y,R as Q,T as q,$ as et,U as z}from"../chunks/runtime.B6-RLXeG.js";import{s as m}from"../chunks/render.DpLb4W4y.js";import{s as at,a as G,i as st,b as J,p as rt}from"../chunks/props.CamHZzWm.js";import{a as ot,e as L,i as S,R as D,C as lt,b as K,c as it,r as T,d as nt,f as dt,P as pt,g as V,p as vt,h as X,j as ct}from"../chunks/Plinko.yuq3S4sr.js";import{d as bt,c as ut}from"../chunks/svelte-head.DF1yiA2t.js";var _t=_('<th class="px-2 py-1 text-left"> </th>'),xt=_('<td class="w-20 px-2 py-1 tabular-nums"> </td>'),yt=_('<tr><td class="px-2 py-1"> </td><td class="px-2 py-1 tabular-nums"> </td><td class="px-2 py-1 tabular-nums"> </td></tr>'),mt=_('<h2 class="mb-3 text-xl font-semibold">Bins Distribution</h2> <div class="h-[400px] w-[800px]"><canvas></canvas></div> <table class="my-4 text-xs"><thead><tr></tr></thead><tbody><tr></tr></tbody></table> <table class="my-4 text-sm"><thead><tr><th class="px-2 py-1 text-left">Risk</th><th class="px-2 py-1 text-left">Expected value</th><th class="px-2 py-1 text-left">Actual value</th></tr></thead><tbody></tbody></table>',1);function ft(B,c){Y(c,!0);const x=at(),I=()=>G(it,"$binProbabilities",x),$=()=>G(T,"$rowCount",x);let U=Q(()=>Object.keys(I())),g=Q(()=>Object.values(I()).map(o=>o*100)),R=Q(()=>K[$()].map(o=>o*100));const E=(o,n,r)=>nt(dt[o][n],r),P=(o,{labels:n,binProbabilities:r,expectedProbabilities:d})=>{const b=new lt(o,{type:"bar",data:{labels:n,datasets:[{label:"Bin Probability",data:r},{label:"Expected Probability",data:d}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Bin Number"}},y:{title:{display:!0,text:"Probability (%)"}}},plugins:{tooltip:{callbacks:{label:p=>`${p.dataset.label}: ${p.parsed.y.toFixed(4)}%`}}}}});return{update:({labels:p,binProbabilities:A,expectedProbabilities:a})=>{b.data.labels=p,b.data.datasets[0].data=A,b.data.datasets[1].data=a,b.update()},destroy:()=>{b.destroy()}}};var k=mt(),O=i(Z(k),2),F=s(O);ot(F,(o,n)=>P==null?void 0:P(o,n),()=>({labels:e(U),binProbabilities:e(g),expectedProbabilities:e(R)})),t(O);var f=i(O,2),h=s(f),w=s(h);L(w,21,()=>e(U),S,(o,n)=>{var r=_t(),d=s(r,!0);t(r),y(()=>m(d,e(n))),u(o,r)}),t(w),t(h);var C=i(h),W=s(C);L(W,21,()=>e(g),S,(o,n)=>{var r=xt(),d=s(r);y(()=>m(d,`${e(n).toFixed(4)??""}%`)),t(r),u(o,r)}),t(W),t(C),t(f);var M=i(f,2),j=i(s(M));L(j,21,()=>[D.LOW,D.MEDIUM,D.HIGH],S,(o,n)=>{var r=yt(),d=s(r),b=s(d,!0);t(d);var p=i(d),A=s(p,!0);y(()=>m(A,E($(),e(n),K[$()]).toFixed(5))),t(p);var a=i(p),l=s(a,!0);y(()=>m(l,E($(),e(n),Object.values(I())).toFixed(5))),t(a),t(r),y(()=>m(b,e(n))),u(o,r)}),t(j),t(M),u(B,k),tt()}function ht(B,c,x){q(c,rt(setInterval(x,10)))}function $t(B,c){e(c)&&(clearInterval(e(c)),q(c,null))}var gt=_("<option> </option>"),Pt=_("<option> </option>"),kt=_('<button class="bg-cyan-100 p-2">Start Auto Drop</button>'),wt=_('<button class="bg-cyan-100 p-2">Stop Auto Drop</button>'),Ct=_('<div class="h-[570px] w-[760px]"><!></div> <div class="mx-4 my-8 flex items-center gap-16"><div class="flex items-center gap-4"><label for="rowCount">Rows</label> <select id="rowCount" class="border border-gray-400 p-2"></select></div> <div class="flex items-center gap-4"><label for="riskLevel">Risk</label> <select id="riskLevel" class="border border-gray-400 p-2"></select></div> <button class="bg-cyan-100 p-2">Drop Ball</button> <!> <p>Dropped: <span> </span></p></div> <div class="mx-4 my-8"><!></div>',1);function Ft(B,c){Y(c,!0);const x=at(),I=()=>G(vt,"$plinkoEngine",x),$=()=>G(T,"$rowCount",x),U=()=>G(X,"$riskLevel",x);let g=z(null),R=z(0);function E(){var a;(a=I())==null||a.dropBall(),q(R,e(R)+1)}var P=Ct();ut(a=>{et.title="Plinko - Benchmark"});var k=Z(P),O=s(k);pt(O,{}),t(k);var F=i(k,2),f=s(F),h=i(s(f),2);L(h,21,()=>ct,S,(a,l)=>{var v=gt(),H={},N=s(v,!0);t(v),y(()=>{H!==(H=e(l))&&(v.value=(v.__value=e(l))==null?"":e(l)),m(N,e(l))}),u(a,v)}),t(h),t(f);var w=i(f,2),C=i(s(w),2);L(C,21,()=>[D.LOW,D.MEDIUM,D.HIGH],S,(a,l)=>{var v=Pt(),H={},N=s(v,!0);t(v),y(()=>{H!==(H=e(l))&&(v.value=(v.__value=e(l))==null?"":e(l)),m(N,e(l))}),u(a,v)}),t(C),t(w);var M=i(w,2);M.__click=E;var j=i(M,2);{var o=a=>{var l=kt();l.__click=[ht,g,E],u(a,l)},n=a=>{var l=wt();l.__click=[$t,g],u(a,l)};st(j,a=>{e(g)===null?a(o):a(n,!1)})}var r=i(j,2),d=i(s(r)),b=s(d,!0);t(d),t(r),t(F);var p=i(F,2),A=s(p);ft(A,{}),t(p),y(()=>m(b,e(R))),V(h,$,a=>J(T,a)),V(C,U,a=>J(X,a)),u(B,P),tt()}bt(["click"]);export{Ft as component};
